# 区块链开发者文档系统 最佳实践
区块链开发者文档系统的最佳实践包括以下几个方面：

*   数据存证和存取模式：根据应用场景选择合适的数据交互模式。数据存证模式适用于将区块链作为存证系统，而数据存取模式适用于将区块链作为可信分布式账本¹。
*   节点角色差异化配置：根据 Fabric 网络中不同节点的角色（如 Ordering 服务、Peer 节点、链码容器）进行差异化的资源配置，例如，Orderer 节点需要加强网络、存储和内存方面的配置²。
*   日志级别调整：在生产环境中，根据系统的重要程度调整日志级别，关键路径上的系统配置不低于 Warning 级别，非关键路径上的系统配置不低于 Info 级别²。
*   链码升级策略：在升级链码前，停止所有该链码的容器，备份并移除旧链码部署文件。先在个别 Peer 节点上部署新链码进行测试，成功后再在其它节点上进行升级操作²。
*   组织结构设计：推荐将组织与 MSP 一一对应，每个组织拥有自己专属的 MSP，避免潜在的数据泄露风险²。
*   证书管理：加强对 Fabric CA 的安全防护，CA 不应该暴露在公共网络域中，并且只能由有限个具备权限的用户可以访问。根证书需要进行离线保护处理，使用中间层证书来完成实体证书的签发²。
*   账本备份和裁剪：用户需要根据业务需求和吞吐量来估算所需磁盘的大小，并定期备份旧的区块链文件到大容量存储中²。
*   系统优化：优化系统的计算、网络、存储等资源配置，例如调整系统缓存策略、允许打开的文件句柄数、调整 TCP 连接超时时间等网络参数²。
*   代码质量和架构：保证代码易于扩展、结构清晰、文档易懂、格式统一、测试完备³。
*   代码规范：采用 Prettier、Eslint、Stylelint 和 Husky 来规范和检查 TS 和 CSS 代码，保证所有开发者的本地格式以及push到GitHub的代码格式一致³。
*   状态管理：对于 React 应用，采用 React Hooks 进行状态管理，在绝大部分场景下可以达到和 Redux 类似的效果³。
*   测试：提供完备的单元测试，并针对组件和页面引入相关的 UI 测试，包括 UI 组件检查和快照对比测试³。

数据存证交互模式：应用远程调用区块链节点写入数据，区块链节点写入交易池，区块链节点返回受理成功，应用保存交易Hash，与本地业务配置关联，区块链异步完成数据共识上链，应用根据交易Hash查询区块链交易（存在性证明）¹。

数据存取交互模式：应用远程调用区块链节点写入数据，区块链节点写入交易池，返回受理成功，区块链异步完成数据共识上链，并发布出块通知，业务系统订阅并接收区块链节点出块通知，按需从区块链拉取区块，业务系统根据业务需求处理交易数据，格式化存储，建立相关业务索引，应用根据业务数据属性查询链上数据¹。

References:
[1] 最佳实践 - 阿里云文档 - https://help.aliyun.com/document_detail/89422.html
[2] 注意事项与最佳实践 - 区块链技术指南 - https://yeasy.gitbook.io/blockchain_guide/10_fabric_op/best_practice
[3] 浅谈区块链开源项目的最佳实践历程 - 稀土掘金 - https://juejin.cn/post/6844904160555433992
